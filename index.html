<!DOCTYPE html>
<html lang="en-US">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LexFlow - Legal AI Assistant</title>
    <meta name="description"
        content="Intelligent legal assistant with integrated Chrome AI (Gemini Nano) for legal text analysis">
    <meta name="keywords" content="legal, law, AI, Gemini Nano, legal analysis, lawyer">
    <link rel="icon" href="assets/lexflow.ico" type="image/x-icon">
    <link rel="stylesheet" href="src/styles/main.css">
</head>

<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="logo">
                ‚öñÔ∏è LexFlow
            </div>
            <div class="user-info">
                <span>üë§ <span id="user-name">User</span></span>
                <span>|</span>
                <span>üìç <span id="user-location">Location</span></span>
                <button class="settings-btn" id="settings-btn" title="Settings">‚öôÔ∏è</button>
            </div>
        </header>

        <!-- Navigation -->
        <nav class="main-nav">
            <button class="nav-tab active" data-view="home">üè† Home</button>
            <button class="nav-tab" data-view="workspace">üìö Legal Workspace</button>
            <button class="nav-tab" data-view="collector">üìù Collector & Curation</button>
            <button class="nav-tab" data-view="history">üìä History & Analytics</button>
        </nav>

        <!-- Content -->
        <main class="content">
            <!-- Home View -->
            <div id="home-view" class="view active">
                <div class="welcome-section">
                    <h1 class="welcome-title">Welcome to LexFlow</h1>
                    <p class="welcome-subtitle">Your intelligent legal assistant with integrated AI</p>

                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-number" id="stat-analyses">0</div>
                            <div class="stat-label">Analyses Performed</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="stat-documents">0</div>
                            <div class="stat-label">Curated Documents</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="stat-time">0h</div>
                            <div class="stat-label">Time Saved</div>
                        </div>
                    </div>
                </div>

                <div class="feature-grid">
                    <div class="feature-card" data-navigate="workspace">
                        <div class="feature-icon">üîç</div>
                        <div class="feature-title">Legal Research and Analysis</div>
                        <div class="feature-description">
                            Search laws by jurisdiction, select relevant articles, and generate personalized legal analyses with AI. Ideal for doctrinal research and documenting legal arguments.
                        </div>
                    </div>

                    <div class="feature-card" data-navigate="collector">
                        <div class="feature-icon">üìã</div>
                        <div class="feature-title">Content Curation</div>
                        <div class="feature-description">
                            Capture legal content from the web, organize it with metadata, and generate structured documents for your knowledge base or public repository.
                        </div>
                    </div>

                    <div class="feature-card" data-navigate="history">
                        <div class="feature-icon">üìà</div>
                        <div class="feature-title">Analytics & History</div>
                        <div class="feature-description">
                            Track your analytics, reuse effective prompts, and monitor your legal productivity with detailed metrics.
                        </div>
                    </div>
                </div>
            </div>

            <!-- Workspace View -->
            <div id="workspace-view" class="view">
                <div class="workspace-container">
                    <!-- Sidebar -->
                    <div class="sidebar">
                        <div class="section-title">
                            üåç Jurisdiction Configuration
                        </div>

                        <div class="jurisdiction-selector">
                            <div class="form-group">
                                <label class="form-label">Country</label>
                                <select class="form-control" id="country-select">
                                    <option value="us" selected>US</option>
                                    <option value="br">Brazil</option>
                                    <option value="es">Spain</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label class="form-label">State</label>
                                <select class="form-control" id="state-select">
                                    <option value="rs" selected>Rio Grande do Sul</option>
                                    <option value="sp">S√£o Paulo</option>
                                    <option value="rj">Rio de Janeiro</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label class="form-label">Cidade</label>
                                <select class="form-control" id="city-select">
                                    <option value="porto-alegre" selected>Porto Alegre</option>
                                    <option value="canoas">Canoas</option>
                                    <option value="caxias">Caxias do Sul</option>
                                </select>
                            </div>
                        </div>

                        <div class="section-title">
                            üìö Available Documents
                        </div>

                        <div class="document-list" id="document-list">
                            <!-- Documents will be populated here -->
                        </div>

                        <div class="form-group" style="margin-top: 1rem;">
                            <label class="form-label">üîç Search Articles</label>
                            <input type="text" class="form-control" id="search-input"
                                placeholder="Ex: consumer law">
                        </div>
                    </div>

                    <!-- Main Panel -->
                    <div class="main-panel">
                        <div class="section-title">
                            üìñ Selected Articles
                        </div>

                        <div class="articles-container" id="articles-container">
                            <p style="color: #7f8c8d; text-align: center; padding: 2rem;">
                                Select a document on the left to view the articles
                            </p>
                        </div>

                        <div class="selected-context" id="selected-context" style="display: none;">
                            <div class="section-title">
                                ‚úÖ Selected Context
                                <button class="clear-all-btn" id="clear-all-articles" title="Limpar todos os artigos">
                                    üóëÔ∏è Clear All
                                </button>
                            </div>
                            <div id="context-items"></div>
                        </div>

                        <div class="prompt-studio">
                            <div class="section-title">
                                ü§ñ Prompt Studio
                            </div>

                            <div class="preset-buttons">
                                <button class="preset-btn active" data-preset="resumo">
                                    üìù Executive Summary
                                </button>
                                <button class="preset-btn" data-preset="analise">
                                    üîç Legal Analysis
                                </button>
                                <button class="preset-btn" data-preset="comparacao">
                                    ‚öñÔ∏è Legal Comparison
                                </button>
                                <button class="preset-btn" data-preset="clausulas">
                                    üìã Clause Generation
                                </button>
                            </div>

                            <div class="form-group">
                                <label class="form-label">Custom Prompt</label>
                                <textarea class="form-control" rows="3" id="custom-prompt"
                                    placeholder="Descreva o que voc√™ gostaria que a IA analise...">Create an executive summary of the selected articles, highlighting the main rights and obligations, using accessible language for presentation to the client.</textarea>
                            </div>

                            <button class="btn btn-primary" id="execute-ai-btn" style="width: 100%; margin-top: 1rem;">
                                üöÄ Perform Analysis with AI
                            </button>

                            <div class="ai-output" id="ai-output" style="display: none;">
                                <div class="ai-thinking" id="ai-thinking">
                                    <div class="spinner"></div>
                                    Analyzing with AI...
                                </div>
                                <div id="ai-result" style="display: none;">
                                    <div id="result-content"></div>
                                    <div class="result-actions">
                                        <div class="feedback-buttons">
                                            <button class="feedback-btn" data-feedback="positive"
                                                title="Useful result">
                                                üëç
                                            </button>
                                            <button class="feedback-btn" data-feedback="negative"
                                                title="Non-useful result">
                                                üëé
                                            </button>
                                        </div>
                                        <button class="copy-btn" id="copy-result-btn" title="Copy result">
                                            üìã Copy
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Collector View -->
            <div id="collector-view" class="view">
                <div class="section-title">
                    üìù Content Collection and Curation
                </div>

                <div class="collector-grid">
                    <div>
                        <div class="section-title">üì• Capture Queue (<span id="queue-count">0</span> items)</div>
                        <div id="queue-items">
                            <p style="color: #7f8c8d; text-align: center; padding: 2rem;">
                                No items in queue. Use the "Add Content" button to get started.
                            </p>
                        </div>
                        <button class="btn btn-primary" id="add-sample-content" style="margin-top: 1rem;">
                            ‚ûï Add Sample Content
                        </button>
                    </div>

                    <div class="editor-panel">
                        <div class="section-title">‚úèÔ∏è Metadata Editor</div>

                        <div class="metadata-form" id="metadata-form">
                            <p style="color: #7f8c8d; text-align: center; padding: 2rem;">
                                Select an item from the queue to edit
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- History View -->
            <div id="history-view" class="view">
                <div class="section-title">
                    üìä History & Analytics
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number" id="history-analyses">{{n}}</div>
                        <div class="stat-label">AI Analytics</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="history-documents">{{n}}</div>
                        <div class="stat-label">Generated documents</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="history-articles">{{n}}</div>
                        <div class="stat-label">Consulted Articles</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">{{n}}</div>
                        <div class="stat-label">AI Accuracy</div>
                    </div>
                </div>

                <div class="section-title" style="margin-top: 2rem;">
                    üïí Recent Analysis
                </div>

                <div id="history-items">
                    <p style="color: #7f8c8d; text-align: center; padding: 2rem;">
                        No analysis performed yet. Use the Legal Workspace to get started.
                    </p>
                </div>
            </div>
        </main>
    </div>

    <!-- Settings Modal -->
    <div id="settings-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>‚öôÔ∏è Settings</h3>
                <button class="modal-close" id="settings-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Language</label>
                    <select class="form-control" id="settings-language">
                        <option value="en-US">English (US)</option>
                        <option value="pt-BR">Portugu√™s (Brasil)</option>
                        <option value="es-ES">Espa√±ol</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label">Country</label>
                    <input type="text" class="form-control" id="settings-country" placeholder="e.g., United States">
                </div>

                <div class="form-group">
                    <label class="form-label">State/Province</label>
                    <input type="text" class="form-control" id="settings-state" placeholder="e.g., California">
                </div>

                <div class="form-group">
                    <label class="form-label">City</label>
                    <input type="text" class="form-control" id="settings-city" placeholder="e.g., San Francisco">
                </div>

                <div class="form-group">
                    <label class="form-label">Serverless Endpoint (Worker URL)</label>
                    <input type="url" class="form-control" id="settings-endpoint"
                        value="https://lexflow-corpus.webmaster-1d0.workers.dev"
                        placeholder="https://your-worker.workers.dev">
                    <small class="form-text">Cloudflare Worker endpoint for corpus submissions</small>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="settings-cancel">Cancel</button>
                <button class="btn btn-primary" id="settings-save">Save</button>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toast-container" class="toast-container"></div>

    <!-- Scripts -->
    <script type="module" src="src/js/app.js"></script>
</body>

</html>